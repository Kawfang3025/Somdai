<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="initial-scale=1, width=device-width, viewport-fit=cover">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css"
        integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Bai+Jamjuree&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="stylesheet" type="text/css" href="css/sidebar.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <title>SomDai</title>
</head>

<body>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.10.0/firebase.js"></script>

    <script>
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyCCfGx1IvaefAOdnXwUwdRsmLVa2mTxc6I",
            authDomain: "somdai.firebaseapp.com",
            databaseURL: "https://somdai.firebaseio.com",
            projectId: "somdai",
            storageBucket: "somdai.appspot.com",
            messagingSenderId: "524262057903",
            appId: "1:524262057903:web:911f71ef1d3b9b29aab15a",
            measurementId: "G-RNKENSBQ91"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
    </script>

    <div class="bs-example">
        <nav class="navbar bg-dark  navbar-dark fixed-top" style="background-color: rgb(10, 6, 43)">
            <!-- Toggler/collapsibe Button -->
            <a id="main" class="m-0" style="color: rgb(255, 255, 255);height: 100%;">
                <span style="cursor:pointer" onclick="openNav()"><label class="hamburger-icon">
                        <span>&nbsp;</span>
                        <span>&nbsp;</span>
                        <span>&nbsp;</span>
                    </label>
                </span>
            </a>

            <!-- <h4 class="text-light ">SomDai</h4> -->
            <a class="navbar-brand" href="#">
                <img src="img/logo.png" alt="logonav" style="width: 60px;">
            </a>

        </nav>
        <div id="mySidenav" class="sidenav mt-5" onclick="closeNav()">
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
            <div class="col-8 ">
                <img src=" img/profile.png" class="rounded-circle" alt="Cinque Terre" style="width: 100%">
            </div>
            <div class="col-16">
                <div class="card" style="width: auto">
                    <div class="card-body">
                        <h5 class="card-title" id="fname">ชื่อ-สกุล</h5>
                        <h6 class="card-subtitle mb-2 text-muted" id="position">ตำแหน่ง</h6>

                    </div>
                </div>
            </div>
            <a href="home.html">หน้าหลัก</a>
            <a href="newRequest.html">แจ้งซ่อม</a>
            <a href="report.html">รายงานการแจ้งซ่อม</a>
            <a href="editproflie.html">แก้ไขข้อมูลส่วนตัว</a>
            <a href="about.html">ทีมผู้พัฒนา</a>
            <a href="javascript:logout();">ออกจากระบบ</a>
        </div>
        <div class="container ">
            <div class="form-group pt-2 ">
                <label for="exampleFormControlTextarea1">รายงานการแจ้งซ่อม</label>
                <select class="form-control " id="department" style="width: 87%">
                    <option value="ทุกแผนก">ทุกแผนก</option>
                    <option value="Sale and Marketing">Sale and Marketing</option>
                    <option value="Accounting">Accounting</option>
                    <option value="Purchased">Purchased</option>
                    <option value="Operation">Operation</option>
                    <option value="Guide">Guide</option>
                    <option value="Engineering">Engineering</option>
                    <option value="Receptions">Receptions</option>
                    <option value="Reservation">Reservation</option>
                    <option value="Food and Beverage">Food and Beverage</option>
                    <option value="Drivers">Drivers</option>
                    <option value="Human Resources">Human Resources</option>
                </select>
                <select class="form-control " id="yearShow" style="width: 87%">
                </select>
                <br>
                </center>
                <a name="" id="" class="btn btn-primary" onclick="finishdata()+table()" role="button">ยืนยัน</a>

                <a name="" id="" class="btn btn-danger" onclick="createPDF()" role="button">Export as PDF</a>
                </center>

            </div>
            <div id="chartContainer" style="height: 360px; width: 100%;"></div>
            <br><br>
            <div id="tab">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>เดือน</th>
                            <th>รายการซ่อม</th>
                            <th>ผู้แจ้งซ่อม</th>
                            <th>ช่างที่รับผิดชอบ</th>
                            <th>วันที่เข้าซ่อม</th>
                        </tr>
                    </thead>
                    <tbody id="detail">
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        var db = firebase.firestore();
        yearlist()
        year = [];
        function yearlist() {
            db.collection("repairing").get().then(function (querySnapshot) {
                querySnapshot.forEach(function (doc) {
                    document.getElementById("yearShow").innerHTML = doc.data().date;
                    var DateTime = doc.data().date.toDate();
                    DateTime = DateTime.toUTCString();
                    DateTime = DateTime.split(' ').slice(3, 4).join(' ');
                    year.push(DateTime);
                    // doc.data() is never undefined for query doc snapshots
                    console.log(doc.id, " => ", DateTime);
                });
            });

        }
    </script>


    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="js/sidebar.js"></script>
</body>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>


</html>